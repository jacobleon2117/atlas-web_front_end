<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Advanced Cart System</title>
</head>
<body>
    <h2 id="availableProducts">Available products:</h2>
    <ul id="productList"></ul>

    <h2 id="cartTitle">Your cart:</h2>
    <div id="cartContent"></div>

    <script>
        // Array of available items
        const availableItems = ['Shampoo', 'Soap', 'Sponge', 'Water'];

        // Check if session storage is supported
        if (!('sessionStorage' in window)) {
            alert("Sorry, your browser does not support Web storage. Try again with a better one");
        } else {
            // Function to get cart from storage
            function getCartFromStorage() {
                const cartString = sessionStorage.getItem('cart');
                return cartString ? JSON.parse(cartString) : {};
            }

            // Function to add item to cart
            function addItemToCart(item) {
                const cart = getCartFromStorage();
                cart[item] = (cart[item] || 0) + 1;
                sessionStorage.setItem('cart', JSON.stringify(cart));
                displayCart();
            }

            // Function to remove item from cart
            function removeItemFromCart(item) {
                const cart = getCartFromStorage();
                delete cart[item];
                sessionStorage.setItem('cart', JSON.stringify(cart));
                displayCart();
            }

            // Function to clear cart
            function clearCart() {
                sessionStorage.removeItem('cart');
                displayCart();
            }

            // Function to create store
            function createStore() {
                const productList = document.getElementById('productList');
                availableItems.forEach(item => {
                    const listItem = document.createElement('li');
                    listItem.textContent = item;
                    listItem.addEventListener('click', () => addItemToCart(item));
                    productList.appendChild(listItem);
                });
            }

            // Modified function to display cart
            function displayCart() {
                const cartContent = document.getElementById('cartContent');
                const cart = getCartFromStorage();
                cartContent.innerHTML = '';
                if (Object.keys(cart).length === 0) {
                    cartContent.innerHTML = '<p>Your cart is empty</p>';
                } else {
                    Object.entries(cart).forEach(([item, quantity]) => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `${item} x ${quantity} (remove)`;
                        listItem.addEventListener('click', () => removeItemFromCart(item));
                        cartContent.appendChild(listItem);
                    });
                    const clearButton = document.createElement('button');
                    clearButton.textContent = 'Clear my cart';
                    clearButton.addEventListener('click', clearCart);
                    cartContent.insertBefore(clearButton, cartContent.firstChild);
                }
            }

            // Call createStore to initialize the product list
            createStore();
        }
    </script>
</body>
</html>
